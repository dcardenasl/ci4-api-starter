#--------------------------------------------------------------------
# Example Environment Configuration File
#
# Copy this file to .env and customize the values for your environment.
# NEVER commit .env to git - it contains sensitive credentials!
#
# Command: cp .env.example .env
#--------------------------------------------------------------------

#--------------------------------------------------------------------
# ENVIRONMENT
#--------------------------------------------------------------------

CI_ENVIRONMENT = development

#--------------------------------------------------------------------
# APP
#--------------------------------------------------------------------

app.baseURL = 'http://localhost:8080'
# app.forceGlobalSecureRequests = false
# app.CSPEnabled = false

#--------------------------------------------------------------------
# DATABASE - Local Development
#--------------------------------------------------------------------

database.default.hostname = 127.0.0.1
database.default.database = ci4_api
database.default.username = root
database.default.password = YOUR_DATABASE_PASSWORD_HERE
database.default.DBDriver = MySQLi
database.default.DBPrefix =
database.default.port = 3306
database.default.charset = utf8mb4
database.default.DBCollat = utf8mb4_general_ci

# Test database configuration
database.tests.hostname = 127.0.0.1
database.tests.database = ci4_test
database.tests.username = root
database.tests.password = YOUR_DATABASE_PASSWORD_HERE
database.tests.DBDriver = MySQLi
database.tests.DBPrefix = ""
database.tests.charset = utf8mb4
database.tests.DBCollat = utf8mb4_general_ci
database.tests.port = 3306

#--------------------------------------------------------------------
# ENCRYPTION
#--------------------------------------------------------------------

# CRITICAL: Generate a secure key for production!
# Run: php spark key:generate
encryption.key = ""

#--------------------------------------------------------------------
# JWT AUTHENTICATION
#--------------------------------------------------------------------

# CRITICAL: Change this to a strong random value in production!
# Generate with: openssl rand -base64 64
JWT_SECRET_KEY = ""

# JWT token expiration (in seconds)
JWT_ACCESS_TOKEN_TTL = 3600

# Refresh token expiration (in seconds, 7 days default)
JWT_REFRESH_TOKEN_TTL = 604800

# Enable token revocation checking
JWT_REVOCATION_CHECK = true

# Require email verification before allowing login/refresh/protected routes
AUTH_REQUIRE_EMAIL_VERIFICATION = true

#--------------------------------------------------------------------
# CORS (Cross-Origin Resource Sharing)
#--------------------------------------------------------------------

# Comma-separated list of allowed origins
# Examples:
#   Development: http://localhost:3000,http://localhost:5173
#   Production: https://app.example.com,https://admin.example.com
#   Wildcard subdomain: https://*.example.com
#   Allow all (NOT RECOMMENDED in production): *
CORS_ALLOWED_ORIGINS = 'http://localhost:3000,http://localhost:8080,http://localhost:5173'

#--------------------------------------------------------------------
# RATE LIMITING
#--------------------------------------------------------------------

# Maximum requests per window (per IP or token)
RATE_LIMIT_REQUESTS = 60

# Time window in seconds
RATE_LIMIT_WINDOW = 60

# Authentication-specific rate limiting (stricter for login/register/password-reset)
# Maximum authentication attempts per window (per IP)
AUTH_RATE_LIMIT_REQUESTS = 5

# Authentication rate limit window in seconds (15 minutes)
AUTH_RATE_LIMIT_WINDOW = 900

#--------------------------------------------------------------------
# SESSION
#--------------------------------------------------------------------

# session.driver = 'CodeIgniter\Session\Handlers\FileHandler'
# session.savePath = null

#--------------------------------------------------------------------
# LOGGER
#--------------------------------------------------------------------

# logger.threshold = 4

#--------------------------------------------------------------------
# EMAIL CONFIGURATION
#--------------------------------------------------------------------

# Email service settings
EMAIL_FROM_ADDRESS = noreply@example.com
EMAIL_FROM_NAME = "API Application"

# Email provider: smtp, sendmail, mail
EMAIL_PROVIDER = smtp

# SMTP Configuration
# For development, use Mailtrap.io or similar service
EMAIL_SMTP_HOST = smtp.mailtrap.io
EMAIL_SMTP_PORT = 2525
EMAIL_SMTP_USER =
EMAIL_SMTP_PASS =
EMAIL_SMTP_CRYPTO = tls

# Alternative SMTP examples:
# Gmail: smtp.gmail.com:587 (requires app password)
# SendGrid: smtp.sendgrid.net:587
# Amazon SES: email-smtp.us-east-1.amazonaws.com:587

#--------------------------------------------------------------------
# QUEUE CONFIGURATION
#--------------------------------------------------------------------

# Queue driver: database, redis, sync
# database = Store jobs in database (default)
# redis = Store jobs in Redis (faster, requires Redis)
# sync = Execute immediately (no queue, for testing)
QUEUE_DRIVER = database

# Redis configuration (if using redis driver)
QUEUE_REDIS_HOST = 127.0.0.1
QUEUE_REDIS_PORT = 6379
QUEUE_REDIS_PASSWORD =
QUEUE_REDIS_DATABASE = 0

# Queue retry settings
QUEUE_MAX_ATTEMPTS = 3
QUEUE_RETRY_AFTER = 90

#--------------------------------------------------------------------
# LOGGING CONFIGURATION
#--------------------------------------------------------------------

# Log level: debug, info, notice, warning, error, critical, alert, emergency
LOG_LEVEL = debug

# Log format: json, text
LOG_FORMAT = json

# Include database queries in logs (development only)
LOG_INCLUDE_QUERIES = true

#--------------------------------------------------------------------
# SENTRY ERROR TRACKING
#--------------------------------------------------------------------

# Sentry DSN (leave empty to disable)
SENTRY_DSN =

# Environment name for Sentry
SENTRY_ENVIRONMENT = development

# Sample rate for performance monitoring (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE = 0.2

#--------------------------------------------------------------------
# MONITORING & METRICS
#--------------------------------------------------------------------

# Enable monitoring features
MONITORING_ENABLED = true

# Slow query threshold in milliseconds
SLOW_QUERY_THRESHOLD = 1000

# Enable metrics collection
METRICS_ENABLED = true

# Enable request/response logging
REQUEST_LOGGING_ENABLED = true

#--------------------------------------------------------------------
# PAGINATION & SEARCH
#--------------------------------------------------------------------

# Default number of items per page
PAGINATION_DEFAULT_LIMIT = 20

# Maximum number of items per page
PAGINATION_MAX_LIMIT = 100

# Minimum search query length
SEARCH_MIN_LENGTH = 3

# Enable full-text search
SEARCH_ENABLED = true

#--------------------------------------------------------------------
# FILE STORAGE
#--------------------------------------------------------------------

# Storage driver: local, s3
FILE_STORAGE_DRIVER = local

# Maximum file size in bytes (10MB default)
FILE_MAX_SIZE = 10485760

# Allowed file types (comma-separated)
FILE_ALLOWED_TYPES = jpg,jpeg,png,gif,pdf,doc,docx,txt,zip

# Local storage path (relative to FCPATH)
FILE_UPLOAD_PATH = writable/uploads/

#--------------------------------------------------------------------
# AWS S3 CONFIGURATION (when FILE_STORAGE_DRIVER = s3)
#--------------------------------------------------------------------

# AWS IAM Access Key ID
# Create dedicated IAM user with permissions: s3:PutObject, s3:GetObject, s3:DeleteObject, s3:ListBucket
# NEVER use root credentials
AWS_ACCESS_KEY_ID =

# AWS IAM Secret Access Key
AWS_SECRET_ACCESS_KEY =

# AWS Region where S3 bucket is located
# Common regions: us-east-1 (N.Virginia), us-west-2 (Oregon), eu-west-1 (Ireland)
AWS_DEFAULT_REGION = us-east-1

# S3 Bucket Name (must be globally unique)
# Example: myapp-uploads-production
# Recommended settings:
#   - Versioning: Enabled
#   - Block public access: Enabled
#   - Encryption: AES-256 or KMS
AWS_BUCKET =

# Custom Base URL for file access (OPTIONAL)
# Use for CloudFront CDN or custom domain
# If empty, uses default: https://{bucket}.s3.{region}.amazonaws.com/{path}
# Example: https://d1234567890.cloudfront.net
AWS_URL =
