{
    "openapi": "3.0.0",
    "info": {
        "title": "CodeIgniter 4 API Starter",
        "description": "RESTful API built with CodeIgniter 4, featuring JWT authentication, standardized responses, and comprehensive documentation.",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8080",
            "description": "Local development server"
        }
    ],
    "paths": {
        "/api/v1/api-keys": {
            "get": {
                "tags": [
                    "API Keys"
                ],
                "summary": "List API keys (admin)",
                "operationId": "455b0ffb66460e6a8f1dcd3b92365600",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "is_active",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "enum": [
                                0,
                                1
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated list of API keys",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ApiKeyResponse"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 5
                                                },
                                                "perPage": {
                                                    "type": "integer",
                                                    "example": 20
                                                },
                                                "page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "lastPage": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "from": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "to": {
                                                    "type": "integer",
                                                    "example": 5
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Forbidden — admin role required"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "API Keys"
                ],
                "summary": "Create API key (admin)",
                "description": "Creates a new API key. The full raw key is returned only once in this response and cannot be retrieved again.",
                "operationId": "03d47d14e8044409cfed178a2604b375",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Human-readable label",
                                        "type": "string",
                                        "example": "My Mobile App"
                                    },
                                    "rate_limit_requests": {
                                        "description": "Global key budget per window",
                                        "type": "integer",
                                        "example": 600
                                    },
                                    "rate_limit_window": {
                                        "description": "Window in seconds",
                                        "type": "integer",
                                        "example": 60
                                    },
                                    "user_rate_limit": {
                                        "description": "Per-user budget per window",
                                        "type": "integer",
                                        "example": 60
                                    },
                                    "ip_rate_limit": {
                                        "description": "Per-IP defensive limit per window",
                                        "type": "integer",
                                        "example": 200
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "API key created — raw key included once",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/ApiKeyResponse"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Forbidden — admin role required"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/api-keys/{id}": {
            "get": {
                "tags": [
                    "API Keys"
                ],
                "summary": "Get API key by ID (admin)",
                "operationId": "ef9fd95e183280332c07200765406878",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "API key details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/ApiKeyResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Forbidden — admin role required"
                    },
                    "404": {
                        "description": "API key not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "API Keys"
                ],
                "summary": "Update API key (admin)",
                "operationId": "1dae4741401fcee38a5fb882914e88f8",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Renamed App"
                                    },
                                    "is_active": {
                                        "type": "integer",
                                        "enum": [
                                            0,
                                            1
                                        ],
                                        "example": 0
                                    },
                                    "rate_limit_requests": {
                                        "type": "integer",
                                        "example": 1200
                                    },
                                    "rate_limit_window": {
                                        "type": "integer",
                                        "example": 60
                                    },
                                    "user_rate_limit": {
                                        "type": "integer",
                                        "example": 120
                                    },
                                    "ip_rate_limit": {
                                        "type": "integer",
                                        "example": 400
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "API key updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/ApiKeyResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Forbidden — admin role required"
                    },
                    "404": {
                        "description": "API key not found"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "API Keys"
                ],
                "summary": "Delete API key (admin)",
                "operationId": "8e72f1059a9540d5e0c225164d5db0d2",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "API key deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Forbidden — admin role required"
                    },
                    "404": {
                        "description": "API key not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/audit": {
            "get": {
                "tags": [
                    "Audit"
                ],
                "summary": "List audit logs",
                "operationId": "41e87451bfc90c0c467029924181436a",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "entityType",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "entityId",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "userId",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated audit logs",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AuditResponse"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 120
                                                },
                                                "perPage": {
                                                    "type": "integer",
                                                    "example": 20
                                                },
                                                "page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "lastPage": {
                                                    "type": "integer",
                                                    "example": 6
                                                },
                                                "from": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "to": {
                                                    "type": "integer",
                                                    "example": 20
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/audit/{id}": {
            "get": {
                "tags": [
                    "Audit"
                ],
                "summary": "Get audit log by ID",
                "operationId": "15933b30077831ab50c19ae9ad19da5a",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Audit log entry",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/AuditResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "404": {
                        "description": "Audit log not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/audit/entity/{type}/{id}": {
            "get": {
                "tags": [
                    "Audit"
                ],
                "summary": "Get audit logs for an entity",
                "operationId": "59a87e8b54c2a8a12a71075dd71493f7",
                "parameters": [
                    {
                        "name": "type",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Audit logs for entity",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AuditResponse"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "404": {
                        "description": "Entity not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login with email",
                "operationId": "2dae767e12186fc9aa78c2a60d00802c",
                "requestBody": {
                    "$ref": "#/components/requestBodies/LoginRequest"
                },
                "responses": {
                    "200": {
                        "description": "Login successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/LoginResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                }
            }
        },
        "/api/v1/auth/google-login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login with Google ID token",
                "operationId": "a990b3030ee0819b83c75dc1af51684e",
                "requestBody": {
                    "$ref": "#/components/requestBodies/GoogleLoginRequest"
                },
                "responses": {
                    "200": {
                        "description": "Google login successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/LoginResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "202": {
                        "description": "Google login received, account pending admin approval",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "properties": {
                                                "user": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 123
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "example": "user@example.com"
                                                        },
                                                        "status": {
                                                            "type": "string",
                                                            "example": "pending_approval"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Account pending approval"
                    },
                    "409": {
                        "description": "Account/provider conflict"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                }
            }
        },
        "/api/v1/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Register a new user",
                "operationId": "7ffd1ae566eebee2f1d97e8bfc47f15c",
                "requestBody": {
                    "$ref": "#/components/requestBodies/RegisterRequest"
                },
                "responses": {
                    "201": {
                        "description": "Registration successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/RegisterResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                }
            }
        },
        "/api/v1/auth/me": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Get current user profile",
                "operationId": "30fd9073987ec366646e1b08842dfe42",
                "responses": {
                    "200": {
                        "description": "Current user profile",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/UserResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/auth/forgot-password": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Send password reset link",
                "description": "Always returns a generic success response for valid emails. For soft-deleted accounts, this may trigger a reactivation request that requires admin approval.",
                "operationId": "19c04fe755ee9d6901b8d3b85b293141",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Generic success response (reset queued or reactivation requested)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                }
            }
        },
        "/api/v1/auth/validate-reset-token": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Validate password reset token",
                "operationId": "34ef7d48db3714aa11ed654064417545",
                "parameters": [
                    {
                        "name": "token",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "email",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "email"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token is valid",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    },
                    "404": {
                        "description": "Invalid token"
                    }
                }
            }
        },
        "/api/v1/auth/reset-password": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Reset password using token",
                "operationId": "3d815d329499a08001e685dacbaa5642",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "token",
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Password reset successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    },
                    "404": {
                        "description": "Invalid token"
                    }
                }
            }
        },
        "/api/v1/auth/refresh": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Refresh access token",
                "operationId": "063a05c344969a8428f2deffd730d406",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "refreshToken"
                                ],
                                "properties": {
                                    "refreshToken": {
                                        "description": "Refresh token issued at login/register",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token refreshed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/TokenResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                }
            }
        },
        "/api/v1/auth/revoke": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Revoke current access token",
                "operationId": "5f45c466b72ec5c588260656758d5e48",
                "responses": {
                    "200": {
                        "description": "Token revoked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Token revoked"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid token"
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/auth/revoke-all": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Revoke all tokens for current user",
                "operationId": "cb5af7be466925aee2736665b1e3dc2e",
                "responses": {
                    "200": {
                        "description": "All tokens revoked",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "All tokens revoked"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/auth/verify-email": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Verify email with token",
                "operationId": "cbaa1c2d07150c7b9eaf1d4f30b38aa4",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "token"
                                ],
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Email verified",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid or expired token"
                    }
                }
            }
        },
        "/api/v1/auth/resend-verification": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Resend verification email",
                "operationId": "d5a90d02b38dbd87a577c2f4e8fc1154",
                "responses": {
                    "200": {
                        "description": "Verification email sent",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/files": {
            "get": {
                "tags": [
                    "Files"
                ],
                "summary": "List files for current user",
                "operationId": "32d01599dc632a4988116bc96b542436",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "File list",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/FileResponse"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 45
                                                },
                                                "perPage": {
                                                    "type": "integer",
                                                    "example": 20
                                                },
                                                "page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "lastPage": {
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "from": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "to": {
                                                    "type": "integer",
                                                    "example": 20
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/files/upload": {
            "post": {
                "tags": [
                    "Files"
                ],
                "summary": "Upload a file",
                "operationId": "2f91ab5ac27a01eab02a88a66d24f873",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "File uploaded",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/FileResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/files/{id}": {
            "get": {
                "tags": [
                    "Files"
                ],
                "summary": "Download or get file metadata",
                "operationId": "f33a0fcf1fc83a8b99ba1e7a15f79bd9",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "File metadata (or file download for local storage)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/FileDownloadResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "application/octet-stream": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "404": {
                        "description": "File not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Files"
                ],
                "summary": "Delete file",
                "operationId": "e2d213f1a143d4656d600707b3e97580",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "File deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "404": {
                        "description": "File not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Health check",
                "operationId": "8134f87e7bbe4107dc228a3b8d62d619",
                "responses": {
                    "200": {
                        "description": "System healthy",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "healthy"
                                        },
                                        "timestamp": {
                                            "type": "string"
                                        },
                                        "checks": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "System unhealthy or monitoring disabled"
                    }
                }
            }
        },
        "/ping": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Ping",
                "operationId": "dbed0a220ea82e65e99701b5a0827c7e",
                "responses": {
                    "200": {
                        "description": "Service reachable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "ok"
                                        },
                                        "timestamp": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/ready": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Readiness check",
                "operationId": "e5d2e3dea8c7b5d8c0113dce7beb0d09",
                "responses": {
                    "200": {
                        "description": "Ready to serve",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "ready"
                                        },
                                        "timestamp": {
                                            "type": "string"
                                        },
                                        "database": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Not ready"
                    }
                }
            }
        },
        "/live": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Liveness check",
                "operationId": "7a050261f6e4cedb42617b378f1e1415",
                "responses": {
                    "200": {
                        "description": "Service alive",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "alive"
                                        },
                                        "timestamp": {
                                            "type": "string"
                                        },
                                        "uptime_seconds": {
                                            "type": "integer",
                                            "example": 12345
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/metrics": {
            "get": {
                "tags": [
                    "Metrics"
                ],
                "summary": "Get metrics overview",
                "operationId": "d54a564b36f982c52d3a8c1a1593b596",
                "parameters": [
                    {
                        "name": "period",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "1h",
                                "24h",
                                "7d",
                                "30d"
                            ],
                            "example": "24h"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Metrics overview",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/MetricsOverview"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "503": {
                        "description": "Metrics disabled"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/metrics/requests": {
            "get": {
                "tags": [
                    "Metrics"
                ],
                "summary": "Get request statistics",
                "operationId": "4ad673b05b918627545403c054eddb53",
                "parameters": [
                    {
                        "name": "period",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "1h",
                                "24h",
                                "7d",
                                "30d"
                            ],
                            "example": "24h"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Request statistics",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/MetricsRequestStats"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/metrics/slow-requests": {
            "get": {
                "tags": [
                    "Metrics"
                ],
                "summary": "Get slow requests",
                "operationId": "2e9739bb742c177cd3ffe85a2f5bc464",
                "parameters": [
                    {
                        "name": "threshold",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1000
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 10
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Slow request list",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/MetricsSlowRequest"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/metrics/custom/{name}": {
            "get": {
                "tags": [
                    "Metrics"
                ],
                "summary": "Get custom metrics",
                "operationId": "c0af6e1d26713795572a2303b98a03e4",
                "parameters": [
                    {
                        "name": "name",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "period",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "1h",
                                "24h",
                                "7d",
                                "30d"
                            ],
                            "example": "24h"
                        }
                    },
                    {
                        "name": "aggregate",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Custom metric data",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/MetricsPayload"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/metrics/record": {
            "post": {
                "tags": [
                    "Metrics"
                ],
                "summary": "Record a custom metric",
                "operationId": "2c377b33a6d82bf982b4347fcbc9f04d",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "value"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "value": {
                                        "type": "number"
                                    },
                                    "tags": {
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Metric recorded",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/MetricRecord"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/users": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "List users (admin)",
                "description": "Lists users except accounts with role superadmin. Requires admin role.",
                "operationId": "bb16d86dd4253aeb9142d6f70fd5dcaa",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "role",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "user",
                                "admin",
                                "superadmin"
                            ]
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "active",
                                "inactive",
                                "pending_approval",
                                "invited"
                            ]
                        }
                    },
                    {
                        "name": "orderBy",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "id",
                                "email",
                                "created_at",
                                "role",
                                "status",
                                "first_name",
                                "last_name"
                            ]
                        }
                    },
                    {
                        "name": "orderDir",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "ASC",
                                "DESC",
                                "asc",
                                "desc"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated user list",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/UserResponse"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 100
                                                },
                                                "perPage": {
                                                    "type": "integer",
                                                    "example": 20
                                                },
                                                "page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "lastPage": {
                                                    "type": "integer",
                                                    "example": 5
                                                },
                                                "from": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "to": {
                                                    "type": "integer",
                                                    "example": 20
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Forbidden — requires admin role"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Create user (admin/superadmin)",
                "description": "Admins can create only role=user. Creating admin/superadmin requires superadmin.",
                "operationId": "462c00c3a4c6ef2fc9646c721e9f22d7",
                "requestBody": {
                    "$ref": "#/components/requestBodies/CreateUserRequest"
                },
                "responses": {
                    "201": {
                        "description": "User created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/UserResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Forbidden — insufficient role permissions"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/users/{id}": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get user by ID",
                "description": "Get details of a specific user. Regular users can only access their own profile.",
                "operationId": "f75dc71b97800024d1f43c723b617d77",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/UserResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Forbidden — cannot access another users profile"
                    },
                    "404": {
                        "description": "User not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Users"
                ],
                "summary": "Update user (admin/superadmin)",
                "description": "Admins can only update users with role=user and cannot promote to admin/superadmin.",
                "operationId": "8f5d3d5fba6849d4bc22555d2fae4786",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "$ref": "#/components/requestBodies/UpdateUserRequest"
                },
                "responses": {
                    "200": {
                        "description": "User updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/UserResponse"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Forbidden — insufficient role permissions"
                    },
                    "404": {
                        "description": "User not found"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationErrorResponse"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Users"
                ],
                "summary": "Delete user (admin/superadmin)",
                "description": "Admins can delete only users with role=user.",
                "operationId": "5a802bd6daed8d9b1b4890ffd96f8c60",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "403": {
                        "description": "Forbidden — insufficient role permissions"
                    },
                    "404": {
                        "description": "User not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/users/{id}/approve": {
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Approve user (admin)",
                "operationId": "712d9d2b97b18c14ff695a6642917efd",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User approved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/UserResponse"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/UnauthorizedResponse"
                    },
                    "404": {
                        "description": "User not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "AuthToken": {
                "title": "Authentication Token",
                "description": "JWT token with associated user data",
                "required": [
                    "token",
                    "user"
                ],
                "properties": {
                    "token": {
                        "description": "JWT access token",
                        "type": "string",
                        "example": "eyJ0eXAiOiJKV1QiLCJhbGc..."
                    },
                    "user": {
                        "$ref": "#/components/schemas/UserResponse"
                    }
                },
                "type": "object"
            },
            "MetricsRequestStats": {
                "title": "Metrics Request Stats",
                "description": "Aggregated request statistics for a time period",
                "properties": {
                    "period": {
                        "description": "Metrics Schemas",
                        "type": "string",
                        "example": "24h"
                    },
                    "since": {
                        "type": "string",
                        "example": "2026-02-26 12:00:00"
                    },
                    "total_requests": {
                        "type": "integer",
                        "example": 1240
                    },
                    "successful_requests": {
                        "type": "integer",
                        "example": 1180
                    },
                    "failed_requests": {
                        "type": "integer",
                        "example": 60
                    },
                    "avg_response_time_ms": {
                        "type": "number",
                        "example": 145.2
                    },
                    "p95_response_time_ms": {
                        "type": "number",
                        "example": 420
                    },
                    "p99_response_time_ms": {
                        "type": "number",
                        "example": 980
                    },
                    "error_rate_percent": {
                        "type": "number",
                        "example": 4.84
                    },
                    "availability_percent": {
                        "type": "number",
                        "example": 95.16
                    },
                    "status_code_breakdown": {
                        "properties": {
                            "2xx": {
                                "type": "integer",
                                "example": 1100
                            },
                            "3xx": {
                                "type": "integer",
                                "example": 80
                            },
                            "4xx": {
                                "type": "integer",
                                "example": 40
                            },
                            "5xx": {
                                "type": "integer",
                                "example": 20
                            }
                        },
                        "type": "object"
                    },
                    "slo": {
                        "properties": {
                            "p95_target_ms": {
                                "type": "integer",
                                "example": 500
                            },
                            "p95_target_met": {
                                "type": "boolean",
                                "example": true
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "MetricsSlowRequest": {
                "title": "Slow Request",
                "description": "Individual slow request entry",
                "properties": {
                    "method": {
                        "type": "string",
                        "example": "GET"
                    },
                    "uri": {
                        "type": "string",
                        "example": "/api/v1/users"
                    },
                    "response_time": {
                        "type": "integer",
                        "example": 1200
                    },
                    "created_at": {
                        "type": "string",
                        "example": "2026-02-26 12:00:00"
                    }
                },
                "type": "object"
            },
            "MetricsPayload": {
                "title": "Metrics Payload",
                "description": "Arbitrary metrics payload (object or array)",
                "oneOf": [
                    {
                        "type": "object",
                        "additionalProperties": true
                    },
                    {
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    }
                ]
            },
            "MetricRecord": {
                "title": "Metric Record",
                "description": "Recorded metric acknowledgement",
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "api.latency"
                    }
                },
                "type": "object"
            },
            "ApiKeyResponse": {
                "title": "API Key Response",
                "description": "API key object metadata",
                "required": [
                    "id",
                    "name",
                    "keyPrefix",
                    "isActive"
                ],
                "properties": {
                    "id": {
                        "description": "Unique API key identifier",
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "description": "Human-readable label for the API key",
                        "type": "string",
                        "example": "My Mobile App"
                    },
                    "keyPrefix": {
                        "description": "First characters of the key (safe to display)",
                        "type": "string",
                        "example": "apk_a3f9c2b1"
                    },
                    "isActive": {
                        "description": "Whether the key is currently active",
                        "type": "boolean",
                        "example": true
                    },
                    "rateLimitRequests": {
                        "description": "Max requests per window",
                        "type": "integer",
                        "example": 600
                    },
                    "rateLimitWindow": {
                        "description": "Window in seconds",
                        "type": "integer",
                        "example": 60
                    },
                    "userRateLimit": {
                        "description": "Per-user limit",
                        "type": "integer",
                        "example": 60
                    },
                    "ipRateLimit": {
                        "description": "Per-IP limit",
                        "type": "integer",
                        "example": 200
                    },
                    "key": {
                        "description": "Full raw API key (only returned once)",
                        "type": "string",
                        "example": "apk_a3f9...",
                        "nullable": true
                    },
                    "createdAt": {
                        "description": "Creation timestamp",
                        "type": "string",
                        "example": "2026-02-26 12:00:00",
                        "nullable": true
                    },
                    "updatedAt": {
                        "description": "Last update timestamp",
                        "type": "string",
                        "example": "2026-02-26 12:00:00",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "AuditResponse": {
                "title": "Audit Response",
                "description": "Audit log entry metadata",
                "required": [
                    "id",
                    "action",
                    "entityType",
                    "createdAt"
                ],
                "properties": {
                    "id": {
                        "description": "Unique log identifier",
                        "type": "integer",
                        "example": 10
                    },
                    "action": {
                        "description": "Action performed",
                        "type": "string",
                        "enum": [
                            "create",
                            "update",
                            "delete",
                            "login_success",
                            "login_failure"
                        ],
                        "example": "update"
                    },
                    "entityType": {
                        "description": "Affected entity type",
                        "type": "string",
                        "example": "users"
                    },
                    "entityId": {
                        "description": "Affected entity ID",
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    },
                    "oldValues": {
                        "description": "Values before the change",
                        "type": "object",
                        "nullable": true
                    },
                    "newValues": {
                        "description": "Values after the change",
                        "type": "object",
                        "nullable": true
                    },
                    "userId": {
                        "description": "ID of user who performed the action",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "userEmail": {
                        "description": "Email of user who performed the action",
                        "type": "string",
                        "example": "admin@example.com",
                        "nullable": true
                    },
                    "ipAddress": {
                        "description": "IP address of the requester",
                        "type": "string",
                        "example": "127.0.0.1",
                        "nullable": true
                    },
                    "userAgent": {
                        "description": "User-Agent of the requester",
                        "type": "string",
                        "example": "Mozilla/5.0...",
                        "nullable": true
                    },
                    "createdAt": {
                        "description": "Log timestamp",
                        "type": "string",
                        "example": "2026-02-26 12:00:00"
                    }
                },
                "type": "object"
            },
            "LoginResponse": {
                "title": "Login Response",
                "description": "Successful authentication response containing JWT tokens and user data",
                "required": [
                    "accessToken",
                    "refreshToken",
                    "expiresIn",
                    "user"
                ],
                "properties": {
                    "accessToken": {
                        "description": "JWT access token",
                        "type": "string",
                        "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "refreshToken": {
                        "description": "Opaque refresh token",
                        "type": "string",
                        "example": "apk_a1b2c3d4e5f6g7h8i9j0..."
                    },
                    "expiresIn": {
                        "description": "Token expiration time in seconds",
                        "type": "integer",
                        "example": 3600
                    },
                    "user": {
                        "$ref": "#/components/schemas/UserResponse"
                    }
                },
                "type": "object"
            },
            "RegisterResponse": {
                "title": "Register Response",
                "description": "User data returned after registration",
                "required": [
                    "id",
                    "email",
                    "firstName",
                    "lastName",
                    "role",
                    "status"
                ],
                "properties": {
                    "id": {
                        "description": "Unique user identifier",
                        "type": "integer",
                        "example": 1
                    },
                    "email": {
                        "description": "User email address",
                        "type": "string",
                        "example": "newuser@example.com"
                    },
                    "firstName": {
                        "description": "User first name",
                        "type": "string",
                        "example": "Alex"
                    },
                    "lastName": {
                        "description": "User last name",
                        "type": "string",
                        "example": "Doe"
                    },
                    "role": {
                        "description": "User role",
                        "type": "string",
                        "enum": [
                            "user",
                            "admin",
                            "superadmin"
                        ],
                        "example": "user"
                    },
                    "status": {
                        "description": "Account status",
                        "type": "string",
                        "enum": [
                            "pending_approval",
                            "active",
                            "invited"
                        ],
                        "example": "pending_approval"
                    },
                    "createdAt": {
                        "description": "Creation timestamp",
                        "type": "string",
                        "example": "2026-02-26 12:00:00",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaginatedResponse": {
                "title": "Paginated Response",
                "description": "Generic pagination payload",
                "required": [
                    "data",
                    "total",
                    "page",
                    "perPage"
                ],
                "properties": {
                    "data": {
                        "description": "Result set",
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "total": {
                        "description": "Total number of records",
                        "type": "integer",
                        "example": 120
                    },
                    "page": {
                        "description": "Current page",
                        "type": "integer",
                        "example": 1
                    },
                    "perPage": {
                        "description": "Items per page",
                        "type": "integer",
                        "example": 20
                    }
                },
                "type": "object"
            },
            "PayloadResponse": {
                "title": "Payload Response",
                "description": "Generic payload wrapper",
                "properties": {
                    "payload": {
                        "description": "Payload data",
                        "type": "object",
                        "additionalProperties": true
                    }
                },
                "type": "object"
            },
            "FileDownloadResponse": {
                "title": "File Download Response",
                "description": "File metadata for downloads and external storage",
                "required": [
                    "id",
                    "originalName",
                    "url",
                    "path",
                    "storageDriver"
                ],
                "properties": {
                    "id": {
                        "description": "Unique file identifier",
                        "type": "integer",
                        "example": 1
                    },
                    "originalName": {
                        "description": "Original filename",
                        "type": "string",
                        "example": "document.pdf"
                    },
                    "url": {
                        "description": "Public or temporary access URL",
                        "type": "string",
                        "example": "https://example.com/storage/document.pdf"
                    },
                    "path": {
                        "description": "Storage path",
                        "type": "string",
                        "example": "uploads/abc123_document.pdf"
                    },
                    "storageDriver": {
                        "description": "Storage driver name",
                        "type": "string",
                        "example": "s3"
                    }
                },
                "type": "object"
            },
            "FileResponse": {
                "title": "File Response",
                "description": "File metadata and access URL",
                "required": [
                    "id",
                    "originalName",
                    "mimeType",
                    "size",
                    "url"
                ],
                "properties": {
                    "id": {
                        "description": "Unique file identifier",
                        "type": "integer",
                        "example": 1
                    },
                    "originalName": {
                        "description": "Original filename",
                        "type": "string",
                        "example": "document.pdf"
                    },
                    "filename": {
                        "description": "Stored filename",
                        "type": "string",
                        "example": "abc123_document.pdf"
                    },
                    "mimeType": {
                        "description": "MIME type",
                        "type": "string",
                        "example": "application/pdf"
                    },
                    "size": {
                        "description": "File size in bytes",
                        "type": "integer",
                        "example": 102400
                    },
                    "humanSize": {
                        "description": "Human readable file size",
                        "type": "string",
                        "example": "100 KB"
                    },
                    "isImage": {
                        "description": "Whether the file is an image",
                        "type": "boolean",
                        "example": false
                    },
                    "url": {
                        "description": "Public or temporary access URL",
                        "type": "string",
                        "example": "https://example.com/storage/file.pdf"
                    },
                    "uploadedAt": {
                        "description": "Upload timestamp",
                        "type": "string",
                        "example": "2026-02-26 12:00:00",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "GoogleIdentityResponse": {
                "title": "Google Identity Response",
                "description": "Verified identity data returned by Google",
                "required": [
                    "provider",
                    "providerId",
                    "email"
                ],
                "properties": {
                    "provider": {
                        "description": "Identity provider",
                        "type": "string",
                        "example": "google"
                    },
                    "providerId": {
                        "description": "Provider user identifier",
                        "type": "string",
                        "example": "113337022221111122223"
                    },
                    "email": {
                        "description": "User email address",
                        "type": "string",
                        "example": "user@example.com"
                    },
                    "firstName": {
                        "description": "User first name",
                        "type": "string",
                        "example": "Alex",
                        "nullable": true
                    },
                    "lastName": {
                        "description": "User last name",
                        "type": "string",
                        "example": "Doe",
                        "nullable": true
                    },
                    "avatarUrl": {
                        "description": "Avatar URL",
                        "type": "string",
                        "example": "https://example.com/avatar.png",
                        "nullable": true
                    },
                    "claims": {
                        "description": "Raw identity claims",
                        "type": "object",
                        "additionalProperties": true
                    }
                },
                "type": "object"
            },
            "PasswordResetResponse": {
                "title": "Password Reset Response",
                "description": "Password reset acknowledgement",
                "required": [
                    "message",
                    "success"
                ],
                "properties": {
                    "message": {
                        "description": "Result message",
                        "type": "string",
                        "example": "Password reset successful"
                    },
                    "success": {
                        "description": "Whether the reset was successful",
                        "type": "boolean",
                        "example": true
                    }
                },
                "type": "object"
            },
            "TokenResponse": {
                "title": "Token Response",
                "description": "Refresh token operation result",
                "required": [
                    "accessToken",
                    "refreshToken",
                    "expiresIn"
                ],
                "properties": {
                    "accessToken": {
                        "description": "New JWT access token",
                        "type": "string"
                    },
                    "refreshToken": {
                        "description": "New opaque refresh token",
                        "type": "string"
                    },
                    "expiresIn": {
                        "description": "Token expiration in seconds",
                        "type": "integer",
                        "example": 3600
                    },
                    "tokenType": {
                        "description": "Token type",
                        "type": "string",
                        "example": "Bearer"
                    }
                },
                "type": "object"
            },
            "VerificationResponse": {
                "title": "Verification Response",
                "description": "Email verification result",
                "required": [
                    "message",
                    "userId",
                    "email",
                    "verifiedAt"
                ],
                "properties": {
                    "message": {
                        "description": "Result message",
                        "type": "string",
                        "example": "Email verified successfully"
                    },
                    "userId": {
                        "description": "Verified user id",
                        "type": "integer",
                        "example": 1
                    },
                    "email": {
                        "description": "Verified email",
                        "type": "string",
                        "example": "user@example.com"
                    },
                    "verifiedAt": {
                        "description": "Verification timestamp",
                        "type": "string",
                        "example": "2026-02-26 12:00:00"
                    }
                },
                "type": "object"
            },
            "MetricsOverview": {
                "title": "Metrics Overview",
                "description": "Overview of request stats, slow requests, and SLO indicators",
                "required": [
                    "requestStats",
                    "slowRequests",
                    "slo",
                    "timestamp"
                ],
                "properties": {
                    "requestStats": {
                        "$ref": "#/components/schemas/MetricsRequestStats"
                    },
                    "slowRequests": {
                        "description": "Slow requests list",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/MetricsSlowRequest"
                        }
                    },
                    "slo": {
                        "description": "Service level objectives summary",
                        "properties": {
                            "availability_percent": {
                                "type": "number",
                                "example": 99.95
                            },
                            "error_rate_percent": {
                                "type": "number",
                                "example": 0.05
                            },
                            "p95_response_time_ms": {
                                "type": "number",
                                "example": 350
                            },
                            "p99_response_time_ms": {
                                "type": "number",
                                "example": 900
                            },
                            "p95_target_ms": {
                                "type": "integer",
                                "example": 500
                            },
                            "p95_target_met": {
                                "type": "boolean",
                                "example": true
                            }
                        },
                        "type": "object"
                    },
                    "timestamp": {
                        "description": "Snapshot timestamp",
                        "type": "string",
                        "example": "2026-02-26 12:00:00"
                    }
                },
                "type": "object"
            },
            "MetricsPayloadResponse": {
                "title": "Metrics Payload Response",
                "description": "Wrapper for raw metrics payloads",
                "properties": {
                    "payload": {
                        "description": "Raw metrics payload (shape varies by endpoint)",
                        "type": "object",
                        "additionalProperties": true
                    }
                },
                "type": "object"
            },
            "UserResponse": {
                "title": "User Response",
                "description": "User data returned by the API",
                "required": [
                    "id",
                    "email",
                    "role",
                    "status"
                ],
                "properties": {
                    "id": {
                        "description": "Unique user identifier",
                        "type": "integer",
                        "example": 1
                    },
                    "email": {
                        "description": "User email address",
                        "type": "string",
                        "example": "user@example.com"
                    },
                    "firstName": {
                        "description": "User first name",
                        "type": "string",
                        "example": "John",
                        "nullable": true
                    },
                    "lastName": {
                        "description": "User last name",
                        "type": "string",
                        "example": "Doe",
                        "nullable": true
                    },
                    "role": {
                        "description": "User role",
                        "type": "string",
                        "enum": [
                            "user",
                            "admin",
                            "superadmin"
                        ],
                        "example": "user"
                    },
                    "status": {
                        "description": "Account status",
                        "type": "string",
                        "enum": [
                            "pending_approval",
                            "active",
                            "invited"
                        ],
                        "example": "active"
                    },
                    "avatarUrl": {
                        "description": "URL to user avatar",
                        "type": "string",
                        "example": "https://example.com/avatar.png",
                        "nullable": true
                    },
                    "createdAt": {
                        "description": "Creation timestamp",
                        "type": "string",
                        "example": "2026-02-26 12:00:00",
                        "nullable": true
                    },
                    "updatedAt": {
                        "description": "Last update timestamp",
                        "type": "string",
                        "example": "2026-02-26 12:00:00",
                        "nullable": true
                    }
                },
                "type": "object"
            }
        },
        "responses": {
            "UnauthorizedResponse": {
                "description": "Unauthorized - Invalid or missing authentication token",
                "content": {
                    "application/json": {
                        "schema": {
                            "properties": {
                                "status": {
                                    "description": "Response status",
                                    "type": "string",
                                    "example": "error"
                                },
                                "message": {
                                    "description": "Error message (localized by Accept-Language)",
                                    "type": "string",
                                    "example": "Unauthorized / No autorizado"
                                },
                                "errors": {
                                    "description": "Error details",
                                    "type": "object",
                                    "nullable": true
                                }
                            },
                            "type": "object"
                        }
                    }
                }
            },
            "ValidationErrorResponse": {
                "description": "Validation Error - Request data failed validation",
                "content": {
                    "application/json": {
                        "schema": {
                            "properties": {
                                "status": {
                                    "description": "Response status",
                                    "type": "string",
                                    "example": "error"
                                },
                                "message": {
                                    "description": "Main error message (localized by Accept-Language)",
                                    "type": "string",
                                    "example": "Validation failed / Validacion fallida"
                                },
                                "errors": {
                                    "description": "Field-specific error messages (localized by Accept-Language)",
                                    "type": "object",
                                    "example": {
                                        "email": "Localized validation message"
                                    }
                                },
                                "code": {
                                    "description": "Error code",
                                    "type": "integer",
                                    "example": 422,
                                    "nullable": true
                                }
                            },
                            "type": "object"
                        }
                    }
                }
            }
        },
        "requestBodies": {
            "GoogleLoginRequest": {
                "description": "Google login request with ID token",
                "required": true,
                "content": {
                    "application/json": {
                        "schema": {
                            "required": [
                                "idToken"
                            ],
                            "properties": {
                                "idToken": {
                                    "description": "Google ID token from frontend OAuth flow",
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        }
                    }
                }
            },
            "LoginRequest": {
                "description": "User login credentials",
                "required": true,
                "content": {
                    "application/json": {
                        "schema": {
                            "required": [
                                "email",
                                "password"
                            ],
                            "properties": {
                                "email": {
                                    "description": "Email address",
                                    "type": "string",
                                    "example": "user@example.com"
                                },
                                "password": {
                                    "description": "User password",
                                    "type": "string",
                                    "format": "password",
                                    "example": "testpass123"
                                }
                            },
                            "type": "object"
                        }
                    }
                }
            },
            "RegisterRequest": {
                "description": "New user registration data",
                "required": true,
                "content": {
                    "application/json": {
                        "schema": {
                            "required": [
                                "email",
                                "password",
                                "firstName",
                                "lastName"
                            ],
                            "properties": {
                                "firstName": {
                                    "description": "First name",
                                    "type": "string",
                                    "example": "Alex"
                                },
                                "lastName": {
                                    "description": "Last name",
                                    "type": "string",
                                    "example": "Doe"
                                },
                                "email": {
                                    "description": "User email address",
                                    "type": "string",
                                    "format": "email",
                                    "example": "newuser@example.com"
                                },
                                "password": {
                                    "description": "Password - Minimum 8 characters, must contain uppercase, lowercase, and number",
                                    "type": "string",
                                    "format": "password",
                                    "example": "Password123"
                                }
                            },
                            "type": "object"
                        }
                    }
                }
            },
            "CreateUserRequest": {
                "description": "Data for creating a new user",
                "required": true,
                "content": {
                    "application/json": {
                        "schema": {
                            "required": [
                                "email"
                            ],
                            "properties": {
                                "firstName": {
                                    "description": "First name",
                                    "type": "string",
                                    "example": "Alex"
                                },
                                "lastName": {
                                    "description": "Last name",
                                    "type": "string",
                                    "example": "Doe"
                                },
                                "email": {
                                    "description": "User email address",
                                    "type": "string",
                                    "format": "email",
                                    "example": "newuser@example.com"
                                },
                                "role": {
                                    "description": "User role (user, admin, superadmin)",
                                    "type": "string",
                                    "example": "user"
                                },
                                "oauthProvider": {
                                    "description": "Optional OAuth provider for externally managed accounts",
                                    "type": "string",
                                    "example": "google"
                                },
                                "oauthProviderId": {
                                    "description": "Provider-specific identifier",
                                    "type": "string",
                                    "example": "113337022221111122223"
                                },
                                "avatarUrl": {
                                    "description": "Optional avatar URL",
                                    "type": "string",
                                    "format": "uri",
                                    "example": "https://example.com/avatar.png"
                                }
                            },
                            "type": "object"
                        }
                    }
                }
            },
            "UpdateUserRequest": {
                "description": "Data for updating a user",
                "required": true,
                "content": {
                    "application/json": {
                        "schema": {
                            "properties": {
                                "firstName": {
                                    "description": "Updated first name",
                                    "type": "string",
                                    "example": "Alex"
                                },
                                "lastName": {
                                    "description": "Updated last name",
                                    "type": "string",
                                    "example": "Doe"
                                },
                                "email": {
                                    "description": "Updated email address",
                                    "type": "string",
                                    "format": "email",
                                    "example": "updated@example.com"
                                },
                                "password": {
                                    "description": "Updated password",
                                    "type": "string",
                                    "format": "password",
                                    "example": "NewPassword123"
                                },
                                "role": {
                                    "description": "Updated role (user, admin, superadmin)",
                                    "type": "string",
                                    "example": "user"
                                }
                            },
                            "type": "object"
                        }
                    }
                }
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "Enter your JWT token in the format: Bearer {token}",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "User authentication endpoints"
        },
        {
            "name": "Users",
            "description": "User management endpoints"
        },
        {
            "name": "Files",
            "description": "File management endpoints"
        },
        {
            "name": "Metrics",
            "description": "Operational metrics endpoints"
        },
        {
            "name": "Audit",
            "description": "Audit log endpoints"
        },
        {
            "name": "Health",
            "description": "Health and readiness endpoints"
        },
        {
            "name": "API Keys",
            "description": "API Keys"
        }
    ]
}